<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Inscription Étudiant</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        async function registerStudent(event) {
            event.preventDefault();

            const btn = document.getElementById("submitBtn");
            const alertBox = document.getElementById("alertBox");

            btn.disabled = true;
            btn.innerText = "Enregistrement...";

            const first_name = document.getElementById("first_name").value;
            const last_name = document.getElementById("last_name").value;

            const response = await fetch("/api/students", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ first_name, last_name }),
            });

            const data = await response.json();

            alertBox.classList.remove("hidden");
            alertBox.innerText = data.message;

            btn.disabled = false;
            btn.innerText = "S'inscrire";

            if (data.success) {
                document.getElementById("form").reset();
            }

            setTimeout(() => {
                alertBox.classList.add("hidden");
            }, 3000);
        }
    </script>
</head>

<body class="min-h-screen flex items-center justify-center bg-gray-100 p-4">

    <div class="w-full max-w-lg bg-white shadow-2xl rounded-2xl p-8 md:p-10">

        <h1 class="text-3xl font-bold text-indigo-500 text-center mb-8">
            Duoling
        </h1>
        <p class="text-center text-gray-500 mt-3 text-sm">App de génaration automatique de binômes </p>

        <div id="alertBox" class="hidden mb-5 text-white bg-blue-600 p-4 rounded text-center text-lg"></div>

        <form id="form" onsubmit="registerStudent(event)" class="space-y-6">

            <div>
                <label class="block font-semibold text-sm text-gray-600 mb-2 text-lg">Nom</label>
                <input 
                    id="last_name" 
                    type="text" 
                    required
                    class="w-full p-2 text-lg text-gray-600 border rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none"
                    placeholder="Ex: BITEMO"
                >
            </div>

            <div>
                <label class="block font-semibold text-sm text-gray-600 mb-2 text-lg">Prénom (s)</label>
                <input 
                    id="first_name" 
                    type="text" 
                    required
                    class="w-full p-2 text-lg text-gray-600 border rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none"
                    placeholder="Ex: Gilles"
                >
            </div>

            <button 
                id="submitBtn"
                type="submit"
                class="w-full bg-indigo-600 text-white py-4 rounded-xl text-lg font-bold hover:bg-indigo-700 transition"
            >
                Enregistrer
            </button>
        </form>

        <p class="text-center text-gray-600 mt-8 text-sm md:text-base">
            Les informations sont envoyées directement à une plateforme sécurisée pour génération de façon aleatoire des binomes.
        </p>

    </div>

</body>
</html>
